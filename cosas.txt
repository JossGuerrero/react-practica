subtotal = monto + (monto * iva)
descuento = buscar cupón en reglas (for)
total = subtotal - subtotal*descuento
✅ Respuesta
Copiar
// App.tsx
import { useRef, useState } from "react";
import CheckoutForm from "./CheckoutForm";
import CheckoutResult from "./CheckoutResult";

export default function App() {
  const amountRef = useRef<HTMLInputElement | null>(null);
  const taxRef = useRef<HTMLSelectElement | null>(null);
  const couponRef = useRef<HTMLSelectElement | null>(null);

  const [total, setTotal] = useState(0);
  const [discountPct, setDiscountPct] = useState(0);

  const calculate = () => {
    const amount = Number(amountRef.current?.value || 0);
    const tax = Number(taxRef.current?.value || 0);
    const coupon = couponRef.current?.value || "0";

    const subtotal = amount + amount * tax;

    const rules = [
      { code: "10", pct: 0.10 },
      { code: "20", pct: 0.20 },
    ];

    let pct = 0;
    for (const r of rules) {
      if (r.code === coupon) pct = r.pct;
    }

    setDiscountPct(pct);
    setTotal(subtotal - subtotal * pct);
  };

  return (
    <>
      <CheckoutForm
        amountRef={amountRef}
        taxRef={taxRef}
        couponRef={couponRef}
        onCalculate={calculate}
      />

      <CheckoutResult total={total} discountPct={discountPct} />
    </>
  );
}
Copiar
// CheckoutForm.tsx
import type { RefObject } from "react";

type Props = {
  amountRef: RefObject<HTMLInputElement | null>;
  taxRef: RefObject<HTMLSelectElement | null>;
  couponRef: RefObject<HTMLSelectElement | null>;
  onCalculate: () => void;
};

export default function CheckoutForm({ amountRef, taxRef, couponRef, onCalculate }: Props) {
  return (
    <section>
      <h3>1) Datos</h3>

      <div style={{ marginBottom: 10 }}>
        <label>Monto:</label><br />
        <input ref={amountRef} type="number" min={0} placeholder="0" style={{ width: 200 }} />
      </div>

      <div style={{ marginBottom: 10 }}>
        <label>IVA:</label><br />
        <select ref={taxRef} style={{ width: 210 }}>
          <option value="0">Sin IVA</option>
          <option value="0.12">IVA 12%</option>
        </select>
      </div>

      <div style={{ marginBottom: 10 }}>
        <label>Cupón:</label><br />
        <select ref={couponRef} style={{ width: 210 }}>
          <option value="0">Sin cupón</option>
          <option value="10">Cupón 10%</option>
          <option value="20">Cupón 20%</option>
        </select>
      </div>

      <button onClick={onCalculate}>Calcular</button>
    </section>
  );
}
Copiar
// CheckoutResult.tsx
type Props = {
  total: number;
  discountPct: number;
};

export default function CheckoutResult({ total, discountPct }: Props) {
  return (
    <section style={{ marginTop: 14 }}>
      <h3>2) Resultado</h3>
      <p>Descuento: {(discountPct * 100).toFixed(0)}%</p>
      <p><b>Total: ${total.toFixed(2)}</b></p>
    </section>
  );
}
EXAMEN 2 — Nómina semanal (useState + useMemo)
Hooks: useState + useMemo  |  Ciclos: map + reduce  |  Regla: horas extra × 1.5
Enunciado
Estado: arreglo de objetos { day, hours } para L–V.
En WorkDays: renderizar inputs con map y actualizar un día con map.
En App: calcular con useMemo + reduce:
totalHoras = Σ horas
extra = max(0, totalHoras - 40)
pago = min(totalHoras,40)*rate + extra*rate*1.5
✅ Respuesta
Copiar
// App.tsx
import { useMemo, useState } from "react";
import WorkDays from "./WorkDays";
import PayrollSummary from "./PayrollSummary";

type Day = { day: string; hours: number };

export default function App() {
  const [days, setDays] = useState<Day[]>([
    { day: "Lun", hours: 0 },
    { day: "Mar", hours: 0 },
    { day: "Mié", hours: 0 },
    { day: "Jue", hours: 0 },
    { day: "Vie", hours: 0 },
  ]);

  const rate = 5;

  const payroll = useMemo(() => {
    const totalHours = days.reduce((sum, d) => sum + d.hours, 0);
    const extra = Math.max(0, totalHours - 40);
    const pay = Math.min(totalHours, 40) * rate + extra * rate * 1.5;
    return { totalHours, extra, pay };
  }, [days]);

  return (
    <div style={{ maxWidth: 520, margin: "24px auto", fontFamily: "system-ui" }}>
      <h1>Examen 2 — Nómina</h1>

      <WorkDays days={days} setDays={setDays} />

      <PayrollSummary totalHours={payroll.totalHours} extra={payroll.extra} pay={payroll.pay} />
    </div>
  );
}
Copiar
// WorkDays.tsx
type Day = { day: string; hours: number };

type Props = {
  days: Day[];
  setDays: (days: Day[]) => void;
};

export default function WorkDays({ days, setDays }: Props) {
  const changeHours = (dayName: string, value: string) => {
    const h = Number(value) || 0;
    setDays(days.map(d => (d.day === dayName ? { ...d, hours: h } : d)));
  };

  return (
    <section>
      <h3>1) Horas L–V</h3>

      {days.map(d => (
        <div key={d.day} style={{ marginBottom: 8 }}>
          {d.day}:{" "}
          <input
            type="number"
            min={0}
            value={d.hours}
            onChange={(e) => changeHours(d.day, e.target.value)}
            style={{ width: 70 }}
          />
        </div>
      ))}
    </section>
  );
}
Copiar
// PayrollSummary.tsx
type Props = { totalHours: number; extra: number; pay: number };

export default function PayrollSummary({ totalHours, extra, pay }: Props) {
  return (
    <section style={{ marginTop: 14 }}>
      <h3>2) Resumen</h3>
      <p>Total horas: {totalHours}</p>
      <p>Horas extra: {extra}</p>
      <p><b>Paga: ${pay.toFixed(2)}</b></p>
    </section>
  );
}
EXAMEN 3 — Total de compras con descuento
Hooks: useState + useCallback  |  Ciclos: map + reduce  |  Regla de negocio: 10% de descuento si el subtotal ≥ 50
Enunciado
Crear una aplicación que simule un carrito de compras.
El estado debe ser un arreglo de productos con la forma: { id, name, price, qty }.
En un componente, mostrar los productos usando map y permitir cambiar la cantidad.
Al presionar el botón Cobrar, calcular:
subtotal = Σ (price * qty)
descuento = (subtotal >= 50) ? subtotal * 0.10 : 0
total = subtotal - descuento
✅ Respuesta
Copiar
// App.tsx
import { useCallback, useState } from "react";
import CartEditor from "./CartEditor";
import CartReceipt from "./CartReceipt";

type Item = {
  id: number;
  name: string;
  price: number;
  qty: number;
};

export default function App() {
  const [items, setItems] = useState<Item[]>([
    { id: 1, name: "Arroz", price: 1.25, qty: 0 },
    { id: 2, name: "Leche", price: 0.95, qty: 0 },
    { id: 3, name: "Huevos", price: 2.40, qty: 0 },
  ]);

  const [receipt, setReceipt] = useState({
    subtotal: 0,
    discount: 0,
    total: 0,
  });

  const onCheckout = useCallback(() => {
    const subtotal = items.reduce(
      (sum, it) => sum + it.price * it.qty,
      0
    );

    const discount = subtotal >= 50 ? subtotal * 0.10 : 0;
    const total = subtotal - discount;

    setReceipt({ subtotal, discount, total });
  }, [items]);

  return (
    <section>
      <CartEditor items={items} setItems={setItems} />

      <button onClick={onCheckout} style={{ marginTop: 10 }}>
        Cobrar
      </button>

      <CartReceipt receipt={receipt} />
    </section>
  );
}

  
Copiar
// CartEditor.tsx
type Item = {
  id: number;
  name: string;
  price: number;
  qty: number;
};

type Props = {
  items: Item[];
  setItems: (items: Item[]) => void;
};

export default function CartEditor({ items, setItems }: Props) {
  const changeQty = (id: number, value: string) => {
    const q = Math.max(0, Number(value) || 0);

    setItems(
      items.map((it) =>
        it.id === id ? { ...it, qty: q } : it
      )
    );
  };

  return (
    <div>
      <h3>Productos</h3>

      {items.map((it) => (
        <div key={it.id}>
          {it.name} (${it.price})
          <input
            type="number"
            min="0"
            value={it.qty}
            onChange={(e) => changeQty(it.id, e.target.value)}
            style={{ width: 60, marginLeft: 8 }}
          />
        </div>
      ))}
    </div>
  );
}

  
Copiar
// CartReceipt.tsx
type Receipt = {
  subtotal: number;
  discount: number;
  total: number;
};

type Props = {
  receipt: Receipt;
};

export default function CartReceipt({ receipt }: Props) {
  return (
    <div style={{ marginTop: 14 }}>
      <h3>Resumen</h3>
      <p>Subtotal: ${receipt.subtotal.toFixed(2)}</p>
      <p>Descuento: ${receipt.discount.toFixed(2)}</p>
      <p>
        <b>Total a pagar: ${receipt.total.toFixed(2)}</b>
      </p>
    </div>
  );
}